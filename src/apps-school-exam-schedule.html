{{> partials/main }}

<head>

    {{> partials/title-meta title="Schedule" }}

    <link rel="stylesheet" href="assets/libs/flatpickr/dist/flatpickr.min.css">

    {{> partials/head-css}}


</head>

{{> partials/body}}


{{> partials/topbar}}
{{> partials/sidebar}}

{{> partials/page-wrapper}}

<div class="container-fluid">

    {{> partials/page-heading title="Schedule" sub-title="Exam" }}

    <div class="row">
        <div class="col-3">
            <div class="card card-h-100">
                <div class="card-body">
                    <h6 class="mb-5">Total Exam (This month)</h6>
                    <div class="d-flex justify-content-center align-items-center position-relative size-36 mx-auto">
                        <svg class="w-100 h-100" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="18" cy="18" r="16" fill="none" class="stroke-light" stroke-width="3"></circle>
                            <g>
                                <circle cx="18" cy="18" r="16" fill="none" class="stroke-primary" stroke-width="3" stroke-dasharray="100" stroke-dashoffset="66.35"></circle>
                            </g>
                        </svg>
                        <!-- Percentage Text -->
                        <div class="position-absolute top-50 start-50 translate-middle">
                            <span class="fs-lg fw-bold text-center">34%</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-9">
            <div class="row">
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="book-open-text" class="size-6 icon-primary float-end"></i>
                            <p class="mb-4 text-muted">Total Test</p>
                            <h5 class="mb-0"><span>18</span></h5>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="library-big" class="size-6 icon-secondary mb-3 float-end"></i>
                            <p class="mb-4 text-muted">General Test</p>
                            <h5 class="mb-0"><span>4</span></h5>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="notepad-text-dashed" class="size-6 icon-info mb-3 float-end"></i>
                            <p class="mb-4 text-muted">Formative Test</p>
                            <h5 class="mb-0"><span>5</span></h5>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="notebook-text" class="size-6 icon-success mb-3 float-end"></i>
                            <p class="mb-4 text-muted">Summative Test</p>
                            <h5 class="mb-0"><span>8</span></h5>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="video" class="size-6 icon-danger mb-3 float-end"></i>
                            <p class="mb-4 text-muted">Online Test (MCQ)</p>
                            <h5 class="mb-0"><span>1</span></h5>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card card-h-100">
                        <div class="card-body">
                            <i data-lucide="blend" class="size-6 icon-warning mb-3 float-end"></i>
                            <p class="mb-4 text-muted">Rejoining Test</p>
                            <h5 class="mb-0"><span>0</span></h5>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="card">
        <div class="card-header d-flex justify-content-between gap-5 w-100">
            <h6 class="card-title mb-0">Exam Schedule List</h6>
            <div class="d-flex gap-2 mt-3 mt-md-0">
                <div>
                    <div id="stdFilterSelect" placeholder="Select STD"></div>
                </div>
                <div>
                    <div id="dateFilterSelect" placeholder="Select Filters"></div>
                </div>
                <div>
                    <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#addExamModal">
                        <i data-lucide="circle-plus" class="size-4 me-1"></i>
                        Add Exam Schedule
                    </button>
                </div>
            </div>
        </div>
        <section class="h-96 card-body pt-0" id="customScroll" data-simplebar>
            <div x-data="{
                schedules: [
                    { scheduleID: 'PEE-498', testName: 'English', testCategory: 'Final Test', testType: 'General', class: '12', startDate: '12 Jan, 2024', endDate: '12 Jan, 2024', status: 'New'},
                    { scheduleID: 'PEE-499', testName: 'Computer', testCategory: 'Practice Test', testType: 'Formative', class: '12', startDate: '19 June, 2024', endDate: '19 June, 2024', status: 'Scheduled'},
                    { scheduleID: 'PEE-500', testName: 'Mathematics', testCategory: 'Midterm Test', testType: 'Summative', class: '11', startDate: '15 March, 2024', endDate: '15 March, 2024', status: 'Scheduled'},
                    { scheduleID: 'PEE-501', testName: 'Physics', testCategory: 'Quarterly Test', testType: 'Summative', class: '10', startDate: '01 July, 2024', endDate: '01 July, 2024', status: 'Completed'},
                    { scheduleID: 'PEE-502', testName: 'Chemistry', testCategory: 'Final Test', testType: 'General', class: '12', startDate: '20 Aug, 2024', endDate: '20 Aug, 2024', status: 'New'},
                    { scheduleID: 'PEE-503', testName: 'Biology', testCategory: 'Practice Test', testType: 'Formative', class: '11', startDate: '11 Feb, 2024', endDate: '11 Feb, 2024', status: 'Scheduled'},
                    { scheduleID: 'PEE-504', testName: 'History', testCategory: 'Midterm Test', testType: 'Summative', class: '10', startDate: '30 Sept, 2024', endDate: '30 Sept, 2024', status: 'Completed'},
                    { scheduleID: 'PEE-505', testName: 'Geography', testCategory: 'Quarterly Test', testType: 'Summative', class: '9', startDate: '25 May, 2024', endDate: '25 May, 2024', status: 'Scheduled'},
                    { scheduleID: 'PEE-506', testName: 'Economics', testCategory: 'Final Test', testType: 'Online', class: '12', startDate: '17 Oct, 2024', endDate: '17 Oct, 2024', status: 'New'},
                    { scheduleID: 'PEE-507', testName: 'Political Science', testCategory: 'Practice Test', testType: 'Formative', class: '11', startDate: '09 Nov, 2024', endDate: '09 Nov, 2024', status: 'Scheduled'},
                    ],
                sortBy: 'scheduleID',              
                sortDirection: 'asc',
                sort(field) {
                    this.sortBy = this.sortBy === field ? this.sortBy : field;
                    this.sortDirection = this.sortBy === field ? (this.sortDirection === 'asc' ? 'desc' : 'asc') : 'asc';
                },
                sortedschedules() {
                    return this.schedules.slice().sort((a, b) => {
                        const aValue = a[this.sortBy], bValue = b[this.sortBy];
                        return (aValue > bValue ? 1 : (aValue < bValue ? -1 : 0)) * (this.sortDirection === 'asc' ? 1 : -1);
                    });
                }
            }" class="table-box">
                <table class="table table-borderless align-middle">
                    <div>
                        <thead>
                            <tr class="table-light border-bottom">
                                <th x-on:click="sort('scheduleID')" class="fw-medium text-dark cursor-pointer">ID <span x-show="sortBy === 'scheduleID'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('testName')" class="fw-medium text-dark cursor-pointer">Test Name <span x-show="sortBy === 'testName'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('testCategory')" class="fw-medium text-dark cursor-pointer">Test Category <span x-show="sortBy === 'testCategory'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('testType')" class="fw-medium text-dark cursor-pointer">Test Type <span x-show="sortBy === 'testType'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('class')" class="fw-medium text-dark cursor-pointer">Class <span x-show="sortBy === 'class'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('startDate')" class="fw-medium text-dark cursor-pointer">Start scheduleID <span x-show="sortBy === 'startDate'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('endDate')" class="fw-medium text-dark cursor-pointer">End scheduleID <span x-show="sortBy === 'endDate'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th x-on:click="sort('status')" class="fw-medium text-dark cursor-pointer">Status <span x-show="sortBy === 'status'" x-text="sortDirection === 'asc' ? '↑' : '↓'"></span></th>
                                <th class="fw-medium text-dark">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="(schedule, index) in sortedschedules()" :key="schedule.scheduleID">
                                <tr>
                                    <td x-text="schedule.scheduleID"></td>
                                    <td x-text="schedule.testName"></td>
                                    <td x-text="schedule.testCategory"></td>
                                    <td x-text="schedule.testType"></td>
                                    <td x-text="schedule.class"></td>
                                    <td x-text="schedule.startDate"></td>
                                    <td x-text="schedule.endDate"></td>
                                    <td>
                                        <span :class="{
                                        'badge bg-info-subtle text-info border border-info-subtle': schedule.status === 'New',
                                        'badge bg-warning-subtle text-warning border border-warning-subtle': schedule.status === 'Scheduled',
                                        'badge bg-success-subtle text-success border border-success-subtle': schedule.status === 'Completed'
                                    }" x-text="schedule.status"></span>
                                    </td>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <button class="btn btn-light text-dark size-8 btn-icon"><i class="ri-pencil-line" data-bs-toggle="modal" data-bs-target="#addExamModal"></i></button>
                                            <button class="btn btn-light text-dark size-8 btn-icon"><i class="ri-delete-bin-line" data-bs-toggle="modal" data-bs-target="#deleteModal"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </div>
                </table>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-4">
                <div>
                    <p class="text-muted">Showing <b class="me-1">1-5</b> of <b class="ms-1">6</b> Results</p>
                </div>
                <div class="justify-content-end d-flex">
                    <nav aria-label="...">
                        <ul class="pagination pagination-active-primary d-flex gap-2 mb-0 p-0">
                            <li class="page-item pagination-primary disabled">
                                <a class="page-link rounded-2 d-flex align-items-center gap-1">
                                    <i data-lucide="chevron-left" class="size-4"></i>
                                    <span>Prev</span>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link page-number rounded-2" href="#">1</a></li>
                            <li class="page-item" aria-current="page">
                                <a class="page-link rounded-2 page-number" href="#">2</a>
                            </li>
                            <li class="page-item pagination-primary ">
                                <a class="page-link rounded-2 d-flex align-items-center gap-1">
                                    <span>Next</span>
                                    <i data-lucide="chevron-right" class="size-4"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="addExamModal" tabindex="-1" aria-labelledby="addExamModalLabel" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered">
            <div class="p-2 modal-content">
                <div class="modal-header">
                    <h6 class="mb-0">Add Exam</h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="p-0 modal-body">
                    <div class="p-4">
                        <form action="#!">
                            <div x-data="{
                                testNameInput: '',testCategorySelect: '', testTypeSelect: '', classSelect: '',  startDateSelect: '', endDateSelect: '', statusSelect:'',
                                errors: {},
                            
                                validate() {
                                    this.errors = {};
                                    if (!this.testNameInput) this.errors.testNameInput = 'Test name is required.';
                                    if (!this.testCategorySelect) this.errors.testCategorySelect = 'Test Category is required.';
                                    if (!this.testTypeSelect) this.errors.testTypeSelect = 'Test Type is required.';
                                    if (!this.classSelect) this.errors.classSelect = 'Class is required.';
                                    if (!this.startDateSelect) this.errors.startDateSelect = 'Start Date is required.';
                                    if (!this.endDateSelect) this.errors.endDateSelect = 'End Date is required.';
                                    if (!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(this.email)) this.errors.email = 'Valid Email is required.';
                                    if (!this.statusSelect) this.errors.statusSelect = 'Status is required.';
                                    return Object.keys(this.errors).length === 0;
                                },
                            
                                clearError(field) { this.errors[field] = '' }
                            }" class="row">
                                <div class="col-12 mb-4">
                                    <label class="form-label fw-medium">Test Name</label>
                                    <input type="text" x-model="testNameInput" placeholder="Test Name" class="form-control" @input="clearError('testNameInput')" />
                                    <p x-show="errors.testNameInput" class="text-sm text-danger" x-text="errors.testNameInput"></p>
                                </div>
                                <div class="col-12 mb-4">
                                    <label class="form-label fw-medium">Test Category</label>
                                    <div id="testCategorySelect" placeholder="Select Category" @input="clearError('testCategorySelect')"></div>
                                    <p x-show="errors.testCategorySelect" class="text-sm text-danger" x-text="errors.testCategorySelect"></p>
                                </div>
                                <div class="col-12 mb-4">
                                    <label class="form-label fw-medium">Test Type</label>
                                    <div id="testTypeSelect" placeholder="Select Category" @input="clearError('testTypeSelect')"></div>
                                    <p x-show="errors.testTypeSelect" class="text-sm text-danger" x-text="errors.testTypeSelect"></p>
                                </div>
                                <div class="col-12 mb-4">
                                    <label class="form-label fw-medium">Total People</label>
                                    <div id="classSelect" placeholder="Select Class" @input="clearError('classSelect')"></div>
                                    <p x-show="errors.classSelect" class="text-sm text-danger" x-text="errors.classSelect"></p>
                                </div>
                                <div class="col-6 mb-4">
                                    <label class="form-label fw-medium">Start Date</label>
                                    <input data-provider="flatpickr" data-date-format="d M, Y" type="text" placeholder="YYYY-MM-DD" class="form-control form-input flatpickr-input active" readonly="readonly" @input="clearError('startDateSelect')" />
                                    <p x-show="errors.startDateSelect" class="text-sm text-danger" x-text="errors.startDateSelect"></p>
                                </div>
                                <div class="col-6 mb-4">
                                    <label class="form-label fw-medium">endDateSelect</label>
                                    <input data-provider="flatpickr" data-date-format="d M, Y" type="text" placeholder="YYYY-MM-DD" class="form-control form-input flatpickr-input active" readonly="readonly" @input="clearError('endDateSelect')" />
                                    <p x-show="errors.endDateSelect" class="text-sm text-danger" x-text="errors.endDateSelect"></p>
                                </div>
                                <div class="col-12 mb-4">
                                    <label class="form-label fw-medium">Event Type</label>
                                    <div id="statusSelect" @change="clearError('statusSelect')"></div>
                                    <p x-show="errors.statusSelect" class="text-sm text-danger" x-text="errors.statusSelect"></p>
                                </div>
                                <div class="d-flex justify-content-end gap-2 mt-4">
                                    <button type="button" class="btn btn-active-danger" data-bs-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-primary" @click="if (validate()) { alert('Form is valid and ready for submission!') }">Add Exam Schedule</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xs">
            <div class="modal-content p-7 text-center">
                <div class="size-14 bg-danger-subtle rounded-circle d-flex justify-content-center align-items-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="trash-2" class="lucide lucide-trash-2 size-6 text-danger">
                        <path d="M3 6h18"></path>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                        <line x1="10" x2="10" y1="11" y2="17"></line>
                        <line x1="14" x2="14" y1="11" y2="17"></line>
                    </svg>
                </div>
                <h5 class="mb-4 lh-base">Are you sure you want to delete this exam ?</h5>
                <div class="d-flex justify-content-center align-items-center gap-2">
                    <button class="btn btn-danger" data-bs-dismiss="modal">Delete</button>
                    <button class="btn btn-link link-primary text-dark" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>


    {{> partials/footer}}
</div>

<script src="assets/libs/flatpickr/dist/flatpickr.min.js"></script>

{{> partials/vendor-scripts}}

<script src="assets/js/apps/school/exam/schedule.init.js"></script>

<script type="module" src="assets/js/main.js"></script>

</body>

</html>